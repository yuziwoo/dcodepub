<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-68979793-14"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag("js", new Date());

        gtag("config", "UA-68979793-14");
    </script>
    <script>
      if (parent) {
          parent.document.getElementsByClassName("nciframe")[0].style.minHeight = `${parent.innerHeight}px`;
      }
    </script>

    <title>스크롤 테스트</title>
    
    <link rel="stylesheet" href="https://dcodeimages1.s3.ap-northeast-1.amazonaws.com/2099/common.css" />
    <script src="https://dcodeimages1.s3.ap-northeast-1.amazonaws.com/2099/common.js"></script>
    
    <style>
        /* Contents CSS */
        body {
            overflow: hidden;
        }

        div {
          padding-bottom: 700px;
        }
        .testing {
          height: 1000px;
          background-color: cornflowerblue;
          display: flex;
          justify-content: center;
          align-items: center;
        }

        .down_btn {
          width: 40%;
          height: 30px;
          border-radius: 15px;
        }
        h1 {
          font-size: 36px;
          color: darkolivegreen;
          text-align: center;
        }
        .delay_wrap {
          display: flex;
          justify-content: center;
        }
        .scroll_effect_new {
          width: 100%;
          max-width: 785px;
          margin: auto;
        }

    </style>
  </head>
  <body>
    <!-- Contents -->
    <main>
      <section class="scroll_wrap">
        <div class="testing"><button class="down_btn">go bottom</button></div>
        <div class="scroll_effect"><h1>HELLO</h1></div>
        <div class="scroll_effect scroll_effect_up"><h1>HELLO</h1></div>
        <div class="scroll_effect scroll_effect_down"><h1>HELLO</h1></div>
        <div class="scroll_effect scroll_effect_left"><h1>HELLO</h1></div>
        <div class="scroll_effect scroll_effect_right"><h1>HELLO</h1></div>
        <div class="scroll_effect scroll_effect_new"><img src="https://dcodeimages1.s3.ap-northeast-1.amazonaws.com/2144/main_visual2.jpg" alt=""></div>
        <div class="delay_wrap">
          <h1 class="scroll_effect scroll_effect_up">H</h1>
          <h1 class="scroll_effect scroll_delay1 scroll_effect_up">E</h1>
          <h1 class="scroll_effect scroll_delay2 scroll_effect_up">L</h1>
          <h1 class="scroll_effect scroll_delay3 scroll_effect_up">L</h1>
          <h1 class="scroll_effect scroll_delay4 scroll_effect_up">O</h1>
        </div>
      </section>
    </main>

    <!-- Script -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://dcode-prod-bucket.s3.ap-northeast-2.amazonaws.com/content/itsdcode_scripts_3.min.js"></script>

    <!-- 쓰면 안되는 기존 scroll effect -->
    <!-- <link rel="stylesheet" href="https://dcodeimages1.s3.ap-northeast-1.amazonaws.com/2173/scroll_effect.css">

    <script>
let scroll_effect = document.getElementsByClassName("scroll_effect");

let scroll_function = () => {
    for (let i=0; i<scroll_effect.length; i++) {
        if (parent.innerHeight / 10 * 9 + scroll_effect[i].getBoundingClientRect().top < parent.scrollY && !scroll_effect[i].classList.contains("scroll_effect_on")) {
            scroll_effect[i].classList.add("scroll_effect_on");
            } 
    }
}

window.addEventListener("DOMContentLoaded", () => {
    scroll_function();
})

parent.addEventListener("resize", (e) => {
  scroll_function();
})

parent.addEventListener("scroll", (e) => {
    scroll_function();
})




// 위치이동 스크립트

let down_btn = document.getElementsByClassName("down_btn")[0];
let delay_wrap = document.getElementsByClassName("delay_wrap")[0];
// let iframes = itsdcode_script_handleEvent('querySelectorAll', {query: '.nciframe'});

down_btn.addEventListener("click", () => {
  // parent.scrollTo(0, parent.document.getElementsByClassName("iframeWrap")[1].offsetTop);
  parent.scrollTo(0, parent.document.getElementsByClassName("nciframe")[1].offsetTop - 70);
  // parent.scrollTo(0, iframes[1].offsetTop);
})
    </script> -->

  </body>



  <!-- scroll effect -->
  <link rel="stylesheet" href="https://dcodeimages1.s3.ap-northeast-1.amazonaws.com/2173/scroll_effect.css">

  <script>
    // 클래스 생성
    let scroll_effect = document.getElementsByClassName("scroll_effect");
    for (let i=0; i < scroll_effect.length; i++) {
      scroll_effect[i].classList.add("scroll_effect_off");
    }

    // 스크롤 함수 생성
    let scroll_function = (e) => {
      try {
        for (let i=0; i < document.getElementsByClassName("scroll_effect_off").length; i++) {
          if (top) {
            if (document.getElementsByClassName("scroll_effect_off")[i].getBoundingClientRect().top < top.innerHeight / 5 * 3  + top.scrollY && !document.getElementsByClassName("scroll_effect_off")[i].classList.contains("scroll_effect_on")) {
              document.getElementsByClassName("scroll_effect_off")[i].classList.add("scroll_effect_on");
              document.getElementsByClassName("scroll_effect_off")[i].classList.remove("scroll_effect_off");
            }
          } else if (!top) {
            e.currentTarget.removeEventListener("scroll", scroll_function);
            for (let i=0; i < document.getElementsByClassName("scroll_effect_off").length; i++) {
              if (!document.getElementsByClassName("scroll_effect_off")[i].classList.contains("scroll_effect_on")) {
                document.getElementsByClassName("scroll_effect_off")[i].classList.add("scroll_effect_on");
                document.getElementsByClassName("scroll_effect_off")[i].classList.remove("scroll_effect_off");
              }
            }
          }
        }
      } catch (exception) {
          e.currentTarget.removeEventListener("scroll", scroll_function);
          for (let i=0; i < document.getElementsByClassName("scroll_effect_off").length; i++) {
            if (!document.getElementsByClassName("scroll_effect_off")[i].classList.contains("scroll_effect_on")) {
              document.getElementsByClassName("scroll_effect_off")[i].classList.add("scroll_effect_on");
              document.getElementsByClassName("scroll_effect_off")[i].classList.remove("scroll_effect_off");
            }
          }
      }
    }

    // 스크롤 이벤트 추가
    top.addEventListener("scroll", scroll_function);
    window.addEventListener("DOMContentLoaded", scroll_function);
    window.addEventListener("resize", scroll_function);
  </script>

  <!-- <script>
    let scroll_effect = document.getElementsByClassName("scroll_effect");
    for (let i=0; i < scroll_effect.length; i++) {
      scroll_effect[i].classList.add("scroll_effect_off");
    }

    let scroll_function = () => {
      try {
        if (top && document.getElementsByClassName("scroll_effect_off").length > 0) {
          for (let i=0; i < document.getElementsByClassName("scroll_effect_off").length; i++) {
            if (document.getElementsByClassName("scroll_effect_off")[i].getBoundingClientRect().top < top.innerHeight / 5 * 3  + top.scrollY && !document.getElementsByClassName("scroll_effect_off")[i].classList.contains("scroll_effect_on")) {
              document.getElementsByClassName("scroll_effect_off")[i].classList.add("scroll_effect_on");
              document.getElementsByClassName("scroll_effect_off")[i].classList.remove("scroll_effect_off");
            }
          }
          window.requestAnimationFrame(scroll_function);
        } else if (!top) {
          for (let i=0; i < document.getElementsByClassName("scroll_effect_off").length; i++) {
              if (!document.getElementsByClassName("scroll_effect_off")[i].classList.contains("scroll_effect_on")) {
                document.getElementsByClassName("scroll_effect_off")[i].classList.add("scroll_effect_on");
                document.getElementsByClassName("scroll_effect_off")[i].classList.remove("scroll_effect_off");
              }
            }
        }
      } catch (exception) {
          for (let i=0; i < document.getElementsByClassName("scroll_effect_off").length; i++) {
              if (!document.getElementsByClassName("scroll_effect_off")[i].classList.contains("scroll_effect_on")) {
                document.getElementsByClassName("scroll_effect_off")[i].classList.add("scroll_effect_on");
                document.getElementsByClassName("scroll_effect_off")[i].classList.remove("scroll_effect_off");
              }
          }
      }
    }

    window.requestAnimationFrame(scroll_function);
  </script> -->
</html>